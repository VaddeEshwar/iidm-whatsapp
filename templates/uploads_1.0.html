{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Campaign</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script>
        function validateForm() {
            const campaignName = document.forms["campaignForm"]["campaign_name"].value;
            const messageTemplate = document.forms["campaignForm"]["message_template"].value;
            const excelFile = document.forms["campaignForm"]["excel_file"].value;
            const excelInput = document.forms["campaignForm"]["excel_file"].files[0];

            // Check required fields
            // if (!campaignName || !messageTemplate || !excelFile) {
            //     alert("Please fill all required fields.");
            //     return false;
            // }

            // Validate Excel file extension
            if (excelInput && !excelInput.name.endsWith('.xlsx')) {
                alert("Please upload a valid .xlsx file.");
                return false;
            }

            // Validate media file (if provided)
            const mediaInput = document.forms["campaignForm"]["media_file"].files[0];
            if (mediaInput) {
                const validTypes = ['image/jpeg', 'image/png', 'video/mp4', 'video/mpeg'];
                if (!validTypes.includes(mediaInput.type)) {
                    alert("Please upload a valid image or video file.");
                    return false;
                }
            }

            return true;
        }
    </script>
</head>
<!-- <body>

    <div class="container">
        <h2>Create New Campaign</h2>
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="message {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}
        <form name="campaignForm" method="post" enctype="multipart/form-data" onsubmit="return validateForm()">
            {% csrf_token %}
            <div class="form-group">
                <input name="campaign_name" placeholder="Campaign Name" required>
            </div>
            <div class="form-group">
                <textarea name="message_template" placeholder="Hi {{name}}! - Mamatha" required></textarea>
            </div>
            <div class="form-group">
                <input type="file" name="excel_file" accept=".xlsx" required>
            </div>
            <div class="form-group">
                <input type="file" name="media_file" accept="image/*,video/*">
            </div>
            <button type="submit">Start Campaign</button>
        </form>
        <a href="{% url 'dashboard' %}" class="view-campaigns">View All Campaigns</a>
    </div>
</body> -->

<body>
    <div class="container">
        <h2>Create New Campaign</h2>
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="message {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}
        <form name="campaignForm" method="post" enctype="multipart/form-data" onsubmit="return validateForm()">
            {% csrf_token %}
            <div class="form-group">
                <input name="campaign_name" placeholder="Campaign Name" required>
            </div>
            <div class="form-group">
                <textarea name="message_template" placeholder="Hi {{name}}! - Mamatha" required></textarea>
            </div>

            <!-- Option 1: Single Phone Number -->
            <div class="form-group">
                <input type="tel" name="phone_number" placeholder="Or enter a single phone number (e.g., 9391701134)" maxlength="10">
                <small>Leave blank if uploading Excel</small>
            </div>

            <!-- Option 2: Excel Upload -->
            <div class="form-group">
                <input type="file" name="excel_file" accept=".xlsx">
                <small>Upload Excel (with 'phone' column). Leave blank if using single number.</small>
            </div>

            <!-- Media (optional for both) -->
            <!-- <div class="form-group">
                <input type="file" name="media_file" accept="image/*,video/*">
            </div> -->

            <button type="submit">Start Campaign</button>
        </form>
        <a href="{% url 'dashboard' %}" class="view-campaigns">View All Campaigns</a>
    </div>


</body>
</html>