{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% if user.is_authenticated %}WhatsApp Campaign Manager{% else %}Login - WhatsApp Campaign Manager{% endif %}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
</head>

<body>
    <!-- Animated Background -->
    <div class="bg-animation"></div>
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414-.074-.123-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />
                    </svg>
                </div>
                WhatsApp Campaign Manager
            </div>

            <!-- âœ… Dynamic Nav: Shows user name when logged in -->
            <nav>
                <ul class="nav-links">
                    {% if user.is_authenticated %}
                        <li style="display: flex; align-items: center; gap: 10px; color: white; font-weight: 500;">
                            <span>Hi, {{ user.username }}!</span>
                            <a href="{% url 'logout' %}" 
                               style="color: #ff9999; text-decoration: none; padding: 4px 10px; border-radius: 20px; background: rgba(0,0,0,0.2); font-size: 14px;">
                                Logout
                            </a>
                        </li>
                    {% else %}
                        <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
                        <li><a href="{% url 'upload' %}">Create Campaign</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        {% if user.is_authenticated %}
            <!-- If already logged in, don't show login form -->
            <div class="page-container" style="text-align: center; padding: 60px 20px;">
                <h2>Welcome back, {{ user.username }}!</h2>
                <p>You're already logged in.</p>
                <a href="{% url 'upload' %}" class="btn btn-primary" style="margin-top: 20px; text-decoration: none; display: inline-block;">
                    Go to Create Campaign
                </a>
            </div>
        {% else %}
            <!-- Login Form Section -->
            <div class="page-container">
                <div class="login-container">
                    <div class="login-form-section">
                        <div class="login-header">
                            <h1 class="login-title">Welcome Back</h1>
                            <p class="login-subtitle">Sign in to manage your WhatsApp campaigns</p>
                        </div>

                        {% if messages %}
                            {% for message in messages %}
                                <p style="color: {% if 'success' in message.tags %}green{% else %}red{% endif %}; margin-bottom: 15px; font-weight: 500;">
                                    {{ message }}
                                </p>
                            {% endfor %}
                        {% endif %}

                        <form id="loginForm" class="login-form" method="post">
                            {% csrf_token %}
                            <div style="margin-bottom: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
                                <label for="username"
                                    style="display: block; margin-bottom: 6px; font-weight: 600; color: #333; font-size: 14px;">
                                    Username <span style="color: #e74c3c;">*</span>
                                </label>
                                <div
                                    style="position: relative; display: flex; align-items: center; border: 1px solid #ddd; border-radius: 6px; padding-left: 12px; background: #fff;">
                                    <span style="font-size: 16px; margin-right: 10px;">ðŸ‘¤</span>
                                    <input type="text" id="username" name="username" placeholder="Enter your username"
                                        required
                                        style="flex: 1; padding: 12px; border: none; outline: none; font-size: 14px; background: transparent;" />
                                </div>
                            </div>

                            <div style="margin-bottom: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
                                <label for="password"
                                    style="display: block; margin-bottom: 6px; font-weight: 600; color: #333; font-size: 14px;">
                                    Password <span style="color: #e74c3c;">*</span>
                                </label>
                                <div
                                    style="position: relative; display: flex; align-items: center; border: 1px solid #ddd; border-radius: 6px; padding-left: 12px; background: #fff;">
                                    <span style="font-size: 16px; margin-right: 10px;">ðŸ”’</span>
                                    <input type="password" id="password" name="password" placeholder="Enter your password"
                                        required
                                        style="flex: 1; padding: 12px; border: none; outline: none; font-size: 14px; background: transparent;" />
                                    <button type="button" onclick="togglePassword()"
                                        style="background: none; border: none; cursor: pointer; padding: 0 12px; display: flex; align-items: center; justify-content: center; height: 100%;">
                                        <svg id="eyeOn" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                            <path
                                                d="M12 4.5C7 4.5 2.73 7.61 2.73 12s4.27 7.5 9.27 7.5c5 0 9.27-5.09 9.27-7.5S17 4.5 12 4.5zm0 13c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z" />
                                        </svg>
                                        <svg id="eyeOff" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                            style="display:none;">
                                            <path
                                                d="M12 4.5C7 4.5 2.73 7.61 2.73 12s4.27 7.5 9.27 7.5c5 0 9.27-5.09 9.27-7.5S17 4.5 12 4.5zm0 13c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z" />
                                            <line x1="3" y1="3" x2="21" y2="21" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" />
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <div
                                style="display: flex; justify-content: space-between; align-items: center; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin-bottom: 20px; font-size: 14px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" id="rememberMe"
                                        style="margin-right: 8px; accent-color: #25D366;" />
                                    <span>Remember me</span>
                                </label>
                            </div>

                            <button type="submit" class="btn btn-primary login-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414-.074-.123-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />
                                </svg>
                                <span>Sign In</span>
                            </button>
                        </form>
                    </div>

                    <!-- Info & Features Section -->
                    <div class="login-info-section">
                        <div class="login-illustration">
                            <div class="illustration-icon">
                                <svg width="80" height="80" viewBox="0 0 24 24" fill="url(#iconGradient)">
                                    <defs>
                                        <linearGradient id="iconGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#25D366;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#128C7E;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <path
                                        d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414-.074-.123-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />
                                </svg>
                            </div>
                            <h2>WhatsApp Campaign Manager</h2>
                            <p>Connect with your customers through the world's most popular messaging platform</p>
                        </div>

                        <div class="features-list">
                            <div class="feature-item">
                                <div class="feature-icon">ðŸš€</div>
                                <div class="feature-text">
                                    <h3>Lightning Fast</h3>
                                    <p>Send thousands of messages in seconds with our optimized infrastructure</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">ðŸ“Š</div>
                                <div class="feature-text">
                                    <h3>Real-time Analytics</h3>
                                    <p>Track delivery rates, engagement, and ROI with detailed insights</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">ðŸ”’</div>
                                <div class="feature-text">
                                    <h3>Secure & Reliable</h3>
                                    <p>Enterprise-grade security with 99.9% uptime guarantee</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>Product</h3>
                <ul>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                    <li><a href="#integrations">Integrations</a></li>
                    <li><a href="#api">API Documentation</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Company</h3>
                <ul>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#careers">Careers</a></li>
                    <li><a href="#blog">Blog</a></li>
                    <li><a href="#press">Press</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Support</h3>
                <ul>
                    <li><a href="#help">Help Center</a></li>
                    <li><a href="#contact">Contact Us</a></li>
                    <li><a href="#status">System Status</a></li>
                    <li><a href="#faq">FAQs</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Legal</h3>
                <ul>
                    <li><a href="#privacy">Privacy Policy</a></li>
                    <li><a href="#terms">Terms of Service</a></li>
                    <li><a href="#cookies">Cookie Policy</a></li>
                    <li><a href="#compliance">Compliance</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 WhatsApp Campaign Manager. All rights reserved.</p>
        </div>
    </footer>

    <!-- Keep password toggle working -->
    <script>
        function togglePassword() {
            const pass = document.getElementById('password');
            const eyeOn = document.getElementById('eyeOn');
            const eyeOff = document.getElementById('eyeOff');

            if (pass.type === 'password') {
                pass.type = 'text';
                eyeOn.style.display = 'none';
                eyeOff.style.display = 'block';
            } else {
                pass.type = 'password';
                eyeOn.style.display = 'block';
                eyeOff.style.display = 'none';
            }
        }
    </script>
</body>

</html>